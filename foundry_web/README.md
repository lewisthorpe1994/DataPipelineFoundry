# Foundry Web

This directory hosts a standalone web experience for exploring compiled DAG manifests. It contains:

- `foundry_backend/` – a lightweight Actix Web service that loads a `manifest.json` file and exposes it via `GET /api/manifest`. It can also serve a built frontend bundle.
- `ui/` – a Vite + React frontend that uses shadcn/ui styling and Cytoscape to visualise the DAG.

## Backend usage

```bash
cargo run -p foundry_backend -- \
  --manifest example/foundry-project/.compiled/manifest.json \
  --addr 0.0.0.0:8085 \
  --static-dir foundry_web/ui/dist
```

Flags:

- `--manifest` (default `manifest.json`): path to the compiled manifest generated by `foundry compile`.
- `--addr` (default `0.0.0.0:8085`): bind address for the HTTP server.
- `--static-dir` (optional): when provided, static assets at this path are served at `/`, allowing a production build of the frontend to be delivered by the same binary.

The API surface currently includes:

- `GET /api/manifest` – returns the parsed manifest as JSON.
- `GET /healthz` – simple liveness probe.

CORS is permissive by default so the frontend can be hosted on a different origin during development.

## Frontend usage

```bash
cd foundry_web/ui
npm install
npm run dev
```

The dev server (port `5173` by default) proxies `/api` and `/healthz` to `http://localhost:8085`. Specify `FOUNDRY_BACKEND_PROXY` to point to a different backend during development.

Build the production bundle with:

```bash
npm run build
```

The output is written to `foundry_web/ui/dist`. Serve that folder with the backend using `--static-dir` as shown above.

## Manifest contract

The frontend expects the manifest shape produced by `ff_core` (root object with a `nodes` array containing `name`, `depends_on`, and `executable` metadata). Any additional fields are preserved and forwarded by the backend without modification, so existing consumers are unaffected.
